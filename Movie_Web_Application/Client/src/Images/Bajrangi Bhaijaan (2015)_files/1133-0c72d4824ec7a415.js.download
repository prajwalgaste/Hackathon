"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1133],{54678:function(e,t,a){a.d(t,{ol:function(){return f}});var i=a(52322),o=a(72779),r=a.n(o),s=a(2784),n=a(19596),l=a(86704),d=a(31769),c=a(88169),E=a(5632),g=a(75824),m=a(49996),u=a(50105),I=a(1833),p=a(66724),T=a(87801);let h=e=>{let{refTagPrefix:t,fallbackUrl:a,displayBackButton:o=!1,...r}=e,n=(0,E.useRouter)(),{pageConst:l,pageType:d}=(0,m.y)(),{previousUniqueUrl:h,isPreviousFromIMDb:f}=(0,u.Qz)(),{homeLinkBuilder:b}=(0,p.WOb)(),w=h?.split("?")?.[0],A=RegExp(`${d}/${l}/mediaviewer/?$`).test(w??""),R={close:(0,g.N)({id:"common_buttons_close",defaultMessage:"Close"}),back:(0,g.N)({id:"breadcrumb_label_back",defaultMessage:"Back"}),home:(0,g.N)({id:"breadcrumb_label_home",defaultMessage:"Home"})},{backUrl:S,buttonLabel:M,isHomeTreatment:y}=s.useMemo(()=>f&&n.asPath!==h&&h&&0>h.indexOf("/embeddable/")&&!A?{backUrl:h,buttonLabel:o?R.back:R.close,isHomeTreatment:o}:a?{backUrl:a,buttonLabel:o?R.back:R.close,isHomeTreatment:o}:{backUrl:b({refSuffix:T.C.EMPTY}),buttonLabel:R.home,isHomeTreatment:!0},[f,n.asPath,h,o]),_=t?{ref_:`${t}_close`}:{},L=(0,I.Kn)(S,_);return(0,i.jsx)(c.TextButton,{"data-testid":r["data-testid"],preIcon:y?"chevron-left":"clear",href:L,className:"breadcrumb-link",onColor:"textPrimary",children:M})},f=e=>{let{className:t,actions:a,children:o,shareProps:s,breadcrumbProps:n,topLabel:l,heightClass:c}=e;return(0,i.jsxs)(b,{"data-testid":"action-bar",className:r()(t,c),children:[(0,i.jsx)(w,{children:(0,i.jsx)(h,{...n})}),!!o&&(0,i.jsx)(A,{children:o}),(0,i.jsxs)(R,{children:[a,!!s&&(0,i.jsx)(d.ZP,{shareProps:s})]}),l]})},b=n.default.div.withConfig({componentId:"sc-d9abcc97-0"})(["align-items:center;display:flex;justify-content:space-between;flex-wrap:wrap;width:100%;min-height:4rem;&.compact{min-height:0;}&.extended{min-height:5rem;}"]),w=n.default.div.withConfig({componentId:"sc-d9abcc97-1"})(["order:2;","{order:1;width:25%;}"],l.mediaQueries.breakpoints.above.m),A=n.default.div.withConfig({componentId:"sc-d9abcc97-2"})(["order:1;width:100%;height:4rem;display:flex;align-content:center;justify-content:center;","{order:2;width:50%;}"],l.mediaQueries.breakpoints.above.m),R=n.default.div.withConfig({componentId:"sc-d9abcc97-3"})(["order:3;text-align:right;padding-right:calc("," - 0.75rem);padding-right:calc("," - 0.75rem);","{width:25%;}"],(0,l.getSpacingVarValue)("ipt-pageMargin"),(0,l.getSpacingVar)("ipt-pageMargin"),l.mediaQueries.breakpoints.above.m)},31133:function(e,t,a){let i,o;a.d(t,{b$:function(){return eO}});var r,s,n=a(52322),l=a(33192),d=a(14865),c=a(2784),E=a(46138),g=a(19596),m=a(88169),u=a(46973),I=a(12088),p=a(2791),T=a(73183),h=a(13012),f=a(80380),b=a(55129),w=a(22431),A=a(75824),R=a(86958),S=a(27613),M=a(84314),y=a(34231),_=a(1833),L=a(72779),D=a.n(L),O=a(54678),v=a(11438),P=a(9325),C=a(16189),N=a(47069);let x={NO_ELEMENT:"advertising banner/interstitial component or iframe are undefined",NO_IFRAME_CONTENT:"banner or interstitial was clicked on, but no contentDocument was found in iframe",NO_CLICK_TARGET:"banner or interstitial was clicked on, but no clickable element was found in iframe"},k=(0,C.createLogger)()("");function H(e,t,a){let i=t?.querySelector("iframe");if(!i){k.error(x.NO_ELEMENT);return}let o=i.contentDocument;if(!o||!o.elementFromPoint){k.error(x.NO_IFRAME_CONTENT);return}let{left:r,top:s}=i.getBoundingClientRect(),n=o.elementFromPoint(e.clientX-r,e.clientY-s);if(n){n.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,N.P)(a);return}let l=t?.querySelector("#interstitial_sponsored");if(l){let{left:t,top:i,width:o,height:r}=l.getBoundingClientRect(),s=e.clientX-t,n=e.clientY-i;if(s>0&&s<=o&&n>0&&n<=r){l.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,N.P)(a);return}}k.error(x.NO_CLICK_TARGET)}var $=a(49265);let B=e=>{let{galleryUrl:t}=e,a=(0,A.N)({id:"mediaViewer_ariaLabel_gallery",defaultMessage:"gallery"});return(0,n.jsx)(m.IconButton,{"data-testid":"mv-gallery-button",name:"grid-view",label:a,href:t,onColor:"base"})},G=e=>{let{state:t,className:a,imagePosition:i}=e,{makeRefMarker:o,value:r}=(0,v.Lz)(),s={countLabel:(0,A.N)(P.KL.countLabel,{position:i,total:t.totalImages})},l=(0,c.useRef)(null);return(0,n.jsx)(O.ol,{className:D()(P.$C.ACTION_BAR,w.$,a),shareProps:{shareBody:W,emailSubject:W,label:j},breadcrumbProps:{refTagPrefix:r,"data-testid":"mv-breadcrumb-close-button"},actions:(0,n.jsxs)(n.Fragment,{children:[!t.showInterstitial&&!!t.position&&!!t.totalImages&&(0,n.jsx)($.vI,{"data-testid":P.$C.ACTION_BAR_GALLERY_COUNT,children:s.countLabel}),(0,n.jsx)(B,{galleryUrl:r?`${t.galleryUrl}?ref_=${o(v.Cd.SEE_MORE)}`:t.galleryUrl??""})]}),heightClass:"extended",children:!t.showInterstitial&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.ZP,{name:w.A.MEDIAVIEWER_BANNER}),(0,n.jsx)($.Ov,{ref:l,onClick:e=>{H(e,l.current,"ad-banner")}})]})})},j={id:"mediaViewer_ariaLabel_shareOnSocialMedia",defaultMessage:"share on social media"},W={id:"mediaViewer_shareText_viewThisImage",defaultMessage:"View this image on IMDb!"},U=1e3/60;function F(){clearTimeout(i),i=void 0}function V(e){return e>0?Math.min(450,e):e<0?Math.max(-450,e):0}function Y(e,t,a){30>Math.abs(e)?(t(0),F()):(a(),t(V(-e)),F(),setTimeout(()=>t(0),U))}var Z=a(14973),K=a(67353),z=a(70314),q=a.n(z),Q=a(5632),X=a(18174),J=a.n(X),ee=a(26806),et=a(25436),ea=a(113),ei=a(49666),eo=a(52154),er=a(14438),es=a(85970),en=a(19126),el=a.n(en);let ed=(e,t)=>{let a=e?el().parse(window.location.search.replace("?","")):{};return t||delete a.ref_,el().stringify(a)};var ec=a(72579),eE=a.n(ec),eg=a(66724);let em=(e,t)=>{switch(e){case es.b.NAME:return eE()(t,`${e}.${e}Text.text`,"");case es.b.TITLE:let a=eE()(t,`${e}.${e}Text.text`,""),i=eE()(t,`${e}.releaseYear.year`,"");return i?`${a} (${i})`:a;case es.b.GALLERY:return eE()(t,"imageGallery.galleryText","");case es.b.LIST:return eE()(t,`${e}.name.originalText`,"")}},eu=(e,t,a,i,o,r)=>e===es.b.NAME?a({nconst:t,refSuffix:v.Cd.EMPTY}):e===es.b.TITLE?i({tconst:t,refSuffix:v.Cd.EMPTY}):e===es.b.GALLERY?o({rgconst:t,refSuffix:v.Cd.EMPTY}):r({lsconst:t,refSuffix:v.Cd.EMPTY}),eI=(e,t)=>{let a=[];return t.forEach(t=>{let i=e===es.b.LIST?{...t,node:{...t.node.item,caption:t.node.description?.originalText||t.node.item.caption}}:{...t};a.push(i)}),a},ep=(e,t,a,i)=>{let o=P.Qn[e],r=e===es.b.LIST?"items":"images",s=`${o}.${r}`,n=`${o}.wrapFront`,l=`${o}.wrapBack`,d=(0,eg.HuA)(i),c=(0,eg.AyT)(i),E=(0,eg.pIz)(i),g=(0,eg.xN6)(i),m=i=>({images:eI(e,eE()(a,`${i}.edges`,[])),title:em(e,a),galleryUrl:eu(e,t,d,c,E,g),total:eE()(a,`${i}.total`,0),startCursor:eE()(a,`${i}.pageInfo.startCursor`,""),hasPreviousPage:eE()(a,`${i}.pageInfo.hasPreviousPage`,!1),endCursor:eE()(a,`${i}.pageInfo.endCursor`,""),hasNextPage:eE()(a,`${i}.pageInfo.hasNextPage`,!1)}),u=m(s),I=m(n),p=m(l),T=u.total?u:I.total?I:p;return{images:[...u.images,...I.images,...p.images],title:T.title,galleryUrl:T.galleryUrl,total:T.total,startCursor:T.startCursor,hasPreviousPage:T.hasPreviousPage,endCursor:T.endCursor,hasNextPage:u.hasNextPage}},eT=(e,t,a,i,o,r)=>{let s=[],n={main:void 0};switch(e){case"init":n.main={id:t,jumpTo:o,first:P.kH,last:P.kH/2,lastYes:!0,firstYes:!0};break;case"left":s=[...Array(P.kH).keys()].map(e=>{let t=a-e;return t<=0?null:t}),n.main={id:t,before:i,last:P.kH,lastYes:!0,firstYes:!1};break;case"right":s=[...Array(P.kH).keys()].map(e=>{let t=a+e;return t>r?null:t}),n.main={id:t,after:i,first:P.kH,lastYes:!1,firstYes:!0}}return s=s.filter(e=>null!==e),"init"!==e&&s.length<1&&(n.main=void 0),{fetchPositions:s,args:n}};var eh=a(11778);let ef=(e,t,a,i)=>{let o,r;let s=e.position||0,n=e.media&&e.media[s],l=n?.node.id,d=(0,_.LF)(a.routerPath??""),c=i?(0,eh.isLocalStage)()?ei.y2:"":d;return l&&(o=e.vanitySubType&&e.vanityType?`${c}/[${P.Ek}]/[vanityOrId]/[idWithVanity]/mediaviewer/[img]`:`${c}/[${P.Ek}]/[vanityOrId]/mediaviewer/[img]`,r=e.vanitySubType&&e.vanityType?`${c}/${e.vanityType}/${e.vanitySubType}/${e.listId}/mediaviewer/${l}/${t&&`?${t}`}`:`${c}/${e.vanityType??e.type}/${e.listId}/mediaviewer/${l}/${t&&`?${t}`}`),{url:o,path:r}},eb=`${v.lP.MEDIA_VIEWER}_${v.Cd.ADS}`,ew=v.lP.MEDIA_VIEWER,eA=(e,t)=>{let a=P.k6[e];return`${t?eb:ew}_${a}`},eR=e=>{var t;return Math.abs(e)===P.ve||0==((Math.abs(e)-P.ve)%(t=P.gG)+t)%t},eS=e=>{var t;return 0==((Math.abs(e)-P.ve)%(t=P.HP)+t)%t};(r=s||(s={})).INITIALIZE="INITIALIZE",r.PAGE_LEFT="page-left",r.PAGE_RIGHT="page-right",r.GOTO_IMAGE_ID="goto-image-id",r.UPDATE_DISTANCE="update-distance",r.UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE="UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",r.FETCH_IMAGES="FETCH-IMAGES",r.FETCH_IMAGES_PENDING="FETCH-IMAGES-PENDING",r.FETCH_IMAGES_DONE="FETCH-IMAGES-DONE",r.FETCH_IMAGES_FAILED="FETCH-IMAGES-FAILED",r.SHOW_EDIT_DRAWER="SHOW-EDIT-DRAWER",r.HIDE_EDIT_DRAWER="HIDE-EDIT-DRAWER",r.SHOW_REPORT_DRAWER="SHOW-REPORT-DRAWER",r.HIDE_REPORT_DRAWER="HIDE-REPORT-DRAWER",r.SHOW_BOTTOM_SHEET="SHOW-BOTTOM-SHEET",r.HIDE_BOTTOM_SHEET="HIDE-BOTTOM-SHEET",r.SHOW_PAGER="SHOW-PAGER",r.HIDE_PAGER="HIDE-PAGER",r.SET_MOUSE_TIMEOUT_ID="SET-MOUSE-TIMEOUT-ID",r.SET_LAST_TIME_MOUSE_MOVED="SET-LAST-TIME-MOUSE-MOVED";let eM=(0,C.createLogger)()("useMediaViewerState"),ey={initialize:(e,t)=>(a,i)=>{let{initialImageId:o,type:r,listId:s}=i();t||(a(o?ey.fetchImageBatch({direction:"init",jumpTo:o,requestContext:e}):ey.fetchImageBatch({direction:"init",position:0,requestContext:e})),a({type:"INITIALIZE",payload:{setState:{position:0,type:r,listId:s,initialImageId:o,enablePagers:!0}}}))},gotoImageId:(e,t)=>(a,i)=>{let o=Object.values(i().media).find(t=>t.node.id===e);a(o?{type:"goto-image-id",payload:{position:o.position}}:ey.fetchImageBatch({direction:"init",jumpTo:e,requestContext:t}))},fetchImageBatch:e=>(t,a)=>{let{requestContext:i,direction:o,position:r,jumpTo:s}=e,n=a(),{type:l,listId:d,media:c,isUserLoggedIn:E}=n,{fetchPositions:g,args:m}=eT(o,d,r,c[n.position]?.cursor,s,n.totalImages),u=l===es.b.LIST,{publicRuntimeConfig:I}=q()();t({type:"FETCH-IMAGES-PENDING",payload:{fetchPositions:g,setState:{initiallyLoading:0===g.length&&!r}}}),Promise.all([!!m.main&&n.gqlClient.query((0,P.s)(l),m.main,{url:I.graphQLEndpoint,serverSideCacheable:!(u&&E)}).toPromise().then(e=>{let r=ep(l,d,e.data,i);if(r.images.length<1){let e="mediaviewer queryData image was empty";throw eM.error(e,{type:a().type,id:a().listId}),Error(e)}t({type:"FETCH-IMAGES-DONE",payload:{direction:o,fetchPositions:g,fetchResult:r}})}).catch(e=>{eM.error("mediaviewer query resulted in error",{type:a().type,id:a().listId,error:e}),t({type:"FETCH-IMAGES-FAILED",payload:{fetchPositions:g,setState:{initiallyLoading:!1},fetchError:e}})})].filter(Boolean))},page:(e,t,a)=>(i,o)=>{let r,s,n;let l=o(),d={left:-1,right:1,load_left:-4,load_right:4},c=l.pageDirection;if(l.loading[l.position]&&!l.showInterstitial||!l.enablePagers)return;let E=l.showInterstitial;eR(o().distance)&&(o().unseenInterstitialAvailable=!1),eS(o().distance)&&l.adHandlers?.updateBannerAd(),i(ey.updateDistance(d[e])),i(ey.stageInterstitialAd());let g=o().showInterstitial,m=E&&c!==e,u=g||m?o().position:o().position+d[e],I=o().position+d[`load_${e}`],p={pageType:l.type,subPageType:et.SubPageType.MEDIA_SINGLE,id:l.listId};switch(e){case"left":s=u<=0?o().totalImages:u,r=I<=0?1:s===o().totalImages?o().totalImages:I,n="page-left";break;case"right":s=u>l.totalImages?1:u,r=I>l.totalImages?o().totalImages:1===s?1:I,n="page-right"}l.media[s]||(r=s),l.media[r]||l.errors[r]||l.loading[r]||i(ey.fetchImageBatch({direction:e,position:s,requestContext:t}));let T=eA(e,E);o().showInterstitial?a({refMarkerString:T,pageAction:`mvi-${n}`,customPageMetadata:p}):a({refMarkerString:T,pageAction:`mv-${n}`,hitType:Z.HitType.PAGE_HIT,customPageMetadata:p}),i({type:n,payload:{position:s,refTag:T}})},updateDistance:e=>(t,a)=>{t({type:"update-distance",payload:{distance:a().distance+e}})},stageInterstitialAd:()=>async(e,t)=>{if(!t().unseenInterstitialAvailable){let a=await t().adHandlers?.updateInterstitialAd(),i=!(0,ea.Wd)(a?.slotsMap?.[w.A.INTERSTITIAL]);e({type:"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",payload:{unseenInterstitialAvailable:i}}),eR(t().distance)&&(t().showInterstitial=i)}},showEdit:()=>({type:"SHOW-EDIT-DRAWER"}),hideEdit:()=>({type:"HIDE-EDIT-DRAWER"}),showReport:()=>({type:"SHOW-REPORT-DRAWER"}),hideReport:()=>({type:"HIDE-REPORT-DRAWER"}),showBottomSheet:()=>({type:"SHOW-BOTTOM-SHEET"}),hideBottomSheet:()=>({type:"HIDE-BOTTOM-SHEET"}),showPager:()=>({type:"SHOW-PAGER"}),hidePager:()=>({type:"HIDE-PAGER"}),setMouseTimeoutId:e=>t=>{t({type:"SET-MOUSE-TIMEOUT-ID",payload:{mouseTimeoutId:e}})},setLastTimeMouseMoved:e=>t=>{t({type:"SET-LAST-TIME-MOUSE-MOVED",payload:{lastTimeMouseMoved:e}})}},e_=function(e,t){let a,{type:i,payload:o}=t;switch(i){case"INITIALIZE":a={...e,...o?.setState};break;case"FETCH-IMAGES-PENDING":{let{fetchPositions:t}=o,i={...e.loading},r={...e.media};t.forEach(e=>{r[e]||(i[e]=!0)}),a={...e,loading:i,...o?.setState};break}case"FETCH-IMAGES-DONE":{let{fetchResult:t,fetchPositions:i,direction:r}=o,s={...e.media},n={...e.loading};t.images.forEach(e=>{if(s[e.position]||(s[e.position]=e,n[e.position]=!1),(0,d.getIsBrowser)()){let t=new Image;t.srcset=(0,eo.gA)(e.node,!0),t.src=e.node.url}}),i?.forEach(e=>{n[e]=!1});let l="init"===r?t.images?.[0]?.position:eD(e.position,n,s,r,t);a={...e,initiallyLoading:!1,position:l,media:s,loading:n,listTitle:t.title,totalImages:t.total,enablePagers:t.total>1,galleryUrl:t.galleryUrl};break}case"FETCH-IMAGES-FAILED":{let{fetchPositions:t,fetchError:i}=o,r={...e.loading},s={...e.errors},n={...e.media};t.forEach(e=>{r[e]=!1,n[e]||(s[e]=i)}),a={...e,...o?.setState,errors:s,loading:r};break}case"page-left":case"page-right":case"goto-image-id":a={...e,position:o.position,refTag:o.refTag};break;case"update-distance":{let t=o?.distance??0,i=e.distance>t?"left":"right",r=eR(t)&&e.unseenInterstitialAvailable,s=eR(t-1),n=eR(t+1);a={...e,distance:o.distance,showInterstitial:r,prevIsInterstitial:s,nextIsInterstitial:n,pageDirection:i};break}case"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE":{let{unseenInterstitialAvailable:t}=o;a={...e,unseenInterstitialAvailable:t};break}case"SHOW-EDIT-DRAWER":a={...e,showEditDrawer:!0,showReportDrawer:!1};break;case"HIDE-EDIT-DRAWER":a={...e,showEditDrawer:!1};break;case"SHOW-REPORT-DRAWER":a={...e,showReportDrawer:!0,showEditDrawer:!1};break;case"HIDE-REPORT-DRAWER":a={...e,showReportDrawer:!1};break;case"SHOW-BOTTOM-SHEET":a={...e,showBottomSheet:!0};break;case"HIDE-BOTTOM-SHEET":a={...e,showBottomSheet:!1};break;case"SHOW-PAGER":a={...e,pagerVisibility:!0};break;case"HIDE-PAGER":a={...e,pagerVisibility:!1};break;case"SET-MOUSE-TIMEOUT-ID":a={...e,mouseTimeoutId:o.mouseTimeoutId};break;case"SET-LAST-TIME-MOUSE-MOVED":a={...e,lastTimeMouseMoved:o.lastTimeMouseMoved};break;default:throw Error("No reducer defined for type: "+i)}return eM.debug("reduced",i,"to new state",a,"payload",o),a},eL=(e,t,a,i,o,r,s,n,l)=>{let E=(0,ee.m8)(),g=(0,Q.useRouter)(),m=(0,R.B)().context,u=(0,er.EO)(),I=(0,ei.ik)(),[p,T]=(0,c.useState)(!0),h={type:e,listId:t,initialImageId:a,vanitySubType:o,vanityType:i,refTag:r,gqlClient:E,media:{},errors:{},loading:{},distance:0,showEditDrawer:!1,showReportDrawer:!1,showBottomSheet:!0,pagerVisibility:!0,mouseTimeoutId:0,lastTimeMouseMoved:new Date,enablePagers:!0,pageDirection:"init",adHandlers:s,isUserLoggedIn:n,adBannerCleared:!1,unseenInterstitialAvailable:!1,showInterstitial:!1,prevIsInterstitial:!1,nextIsInterstitial:!1,initiallyLoading:!1};l&&(h=e_(h,{type:"FETCH-IMAGES-DONE",payload:{direction:h.pageDirection,fetchResult:l,fetchPositions:l.images?.map(e=>e.position)}}));let f=J()(e_,h),b=f[0],w=f[1],A={pageLeft:()=>w(ey.page("left",m,u)),pageRight:()=>w(ey.page("right",m,u)),showEdit:()=>w(ey.showEdit()),hideEdit:()=>w(ey.hideEdit()),showReport:()=>w(ey.showReport()),hideReport:()=>w(ey.hideReport()),showBottomSheet:()=>w(ey.showBottomSheet()),hideBottomSheet:()=>w(ey.hideBottomSheet()),gotoImageId:e=>w(ey.gotoImageId(e,m)),showPager:()=>w(ey.showPager()),hidePager:()=>w(ey.hidePager()),setMouseTimeoutId:e=>w(ey.setMouseTimeoutId(e)),setLastTimeMouseMoved:e=>w(ey.setLastTimeMouseMoved(e))},S=e=>{(0,K.isRightArrowKey)(e)?A.pageRight():(0,K.isLeftArrowKey)(e)&&A.pageLeft()};(0,c.useEffect)(()=>(window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)}),[]);let M=(0,c.useRef)(void 0),y=(0,c.useRef)(!1);return(0,c.useEffect)(()=>{let{url:e,path:t}=ef(b,ed((0,d.getIsBrowser)(),p),m,I),a=b.position||0,i=b.media&&b.media[a],o=i?.node.id,r=M.current;if(r&&a!==r&&i&&e){if(M.current=b.position,!o)return;if(!y.current){y.current=!0;return}g.replace(e,t,{shallow:!0,imageId:o})}else 0>window.location.href.indexOf(o)&&e&&g.replace(e,t,{shallow:!0,imageId:o})},[b.position,b.media]),(0,c.useEffect)(()=>{w(ey.initialize(m,l)),T(!1)},[]),(0,c.useDebugValue)(b),{state:b,actions:A}},eD=(e,t,a,i,o)=>{let r=e,s="left"===i;if(void 0!==r&&!t[r]&&!a[r]){if(o.images.length){let e=s?o.images.length-1:0;r=o.images[e].position}else{let e=Object.keys(a).sort();e.length&&(s&&e.reverse(),r=e.reduce((e,t)=>{let a=e,i=Number(t);return void 0===a?a=i:r&&(s&&i<r&&a>r?a=i:i>r&&a<r&&(a=i)),a},void 0))}}return r},eO=e=>{let{type:t,listId:a,imgId:r,vanityType:s,vanitySubType:g,refTag:L,adHandlers:D,initialQueryData:O,initialQueryError:v}=e,C=(0,E.Z)(),N=(0,M.n)(),x=(0,S.Z)(),k=(0,R.B)().context,{state:B,actions:j}=eL(t,a,r,s,g,L,D,N,O?ep(t,a,O,k):void 0),W=`${_.l8}${k.requestPath?.split("?")[0]??""}`,Z=(0,y.z)(W),{showInterstitial:K,errors:z,position:q,loading:Q,media:X,totalImages:J,initiallyLoading:ee}=B,[et,ea]=(0,c.useState)(0),ei=(0,c.useRef)(null),eo=z[q],er=X[q]?.node,es=X[q-1]?.node,en=X[q+1]?.node,el=X[q]?.position,ed=Q[q]||ee,ec=X[q]?.node.correctionLink?.url,eE=X[q]?.node.reportingLink?.url,eg={countLabel:(0,A.N)(P.KL.countLabel,{position:el,total:J}),previousImageLabel:(0,A.N)(P.KL.previousImageLabel),nextImageLabel:(0,A.N)(P.KL.nextImageLabel),closePromptLabel:(0,A.N)(P.KL.closePromptLabel)},em=(0,m.useSwipeable)({onSwipedLeft:e=>{Y(-e.deltaX,e=>ea(e),j.pageRight)},onSwipedRight:e=>{Y(-e.deltaX,e=>ea(e),j.pageLeft)},onSwiping:e=>{var t,a;t=-e.deltaX,a=e=>ea(e),i?o=()=>{a(V(t))}:(a(V(t)),i=setTimeout(()=>{o&&o(),F()},U))},onSwiped:()=>{var e;e=e=>ea(e),F(),setTimeout(()=>e(0),U)}});function eu(e){let t=document.getElementsByClassName(e);return!!(t.length>0&&t[0].matches(":hover"))}function eI(){return!(0,d.getIsNode)()&&(0,l.getIsMdot)(window.location.hostname)}function eT(){if(ed||eI())return;let e=eu(P.$C.PAGE_LEFT),t=eu(P.$C.PAGE_RIGHT);e||t||j.hidePager()}if((0,c.useEffect)(()=>{eI()&&j.showPager()},[]),(0,c.useEffect)(()=>{j.setMouseTimeoutId(setTimeout(eT,5e3))},[]),(0,c.useEffect)(()=>{K&&clearTimeout(B.mouseTimeoutId)},[K]),eo||v)return(0,n.jsx)($.Bc,{});let eh={image:er||void 0,title:B.listTitle,description:er?.caption?.plainText||B.listTitle,openGraphData:{type:T.s.Website},canonicalUrl:W,hrefLangEntries:Z};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Se,{...eh}),(0,n.jsx)(f.Z,{}),(0,n.jsx)(m.PageContentContainer,{children:(0,n.jsx)(G,{state:B,imagePosition:el})}),(0,n.jsxs)($.zb,{"data-testid":P.$C.PARENT,className:P.$C.PARENT,children:[(0,n.jsx)($.GX,{...em,onMouseMove:()=>{B.pagerVisibility||j.showPager(),+new Date().getTime()-B.lastTimeMouseMoved.getTime()>400&&(clearTimeout(B.mouseTimeoutId),j.setLastTimeMouseMoved(new Date),j.setMouseTimeoutId(setTimeout(eT,2e3)))},"data-testid":P.$C.TOUCH_HANDLER,onClick:e=>{K?H(e,ei.current,"ad-interstitial"):B.showBottomSheet?j.hideBottomSheet():j.showBottomSheet()},children:(0,n.jsx)($.D5,{})}),!!B.enablePagers&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ev,{id:P.wO,"aria-live":"polite"}),(0,n.jsx)($.f$,{isVisible:!ed&&B.pagerVisibility,direction:"left",onSelect:()=>{j.pageLeft(),document.getElementById(P.wO)&&(document.getElementById(P.wO).textContent=C.formatMessage({id:"mediaViewer_ariaLabel_pager_back",defaultMessage:"Navigated back to image {imagePosition} of {totalImages}"},{imagePosition:el-1,totalImages:J}))},className:P.$C.PAGE_LEFT,ariaLabel:eg.previousImageLabel}),(0,n.jsx)($.ed,{isVisible:!ed&&B.pagerVisibility,direction:"right",onSelect:()=>{j.pageRight(),document.getElementById(P.wO)&&(document.getElementById(P.wO).textContent=C.formatMessage({id:"mediaViewer_ariaLabel_pager_forward",defaultMessage:"Navigated forward to image {imagePosition} of {totalImages}"},{imagePosition:el+1,totalImages:J}))},className:P.$C.PAGE_RIGHT,ariaLabel:eg.nextImageLabel})]}),!!ed&&!K&&(0,n.jsx)($.zL,{"data-testid":P.$C.LOADER,children:(0,n.jsx)(m.Loader,{})}),!!K&&(0,n.jsx)($.C1,{offset:et,ref:ei,isMdot:eI(),children:(0,n.jsx)(b.ZP,{name:w.A.INTERSTITIAL})}),!B.showInterstitial&&!eo&&!v&&!ed&&!!er&&(0,n.jsx)(I.Z,{image:er,"data-testid":P.$C.IMAGE,offset:et,prevImage:B.prevIsInterstitial?void 0:es,nextImage:B.nextIsInterstitial?void 0:en},"image-"+er.id),!B.showInterstitial&&!eo&&!ed&&!!er&&(0,n.jsx)(h.V,{className:P.$C.MEDIA_SHEET,imageData:er,content:{contextTitle:`${B.listTitle}`,contextCount:eg.countLabel},editFlow:ec&&x?{desktopLink:ec,desktopOnOpen:()=>j.showEdit(),resolveMobileURL:e=>e.correctionLink.url}:void 0,reportFlow:eE&&x?{desktopLink:eE,desktopOnOpen:()=>j.showReport(),resolveMobileURL:e=>e.reportingLink.url}:void 0,listId:a,isClosed:!B.showBottomSheet,onCloseClicked:j.hideBottomSheet,onOpenClicked:j.showBottomSheet}),(0,n.jsx)(m.Drawer,{"data-testid":"mv-contribute-edit-drawer",className:P.$C.CONTRIBUTE_EDIT_DRAWER,isOpen:B.showEditDrawer,onCloseClicked:j.hideEdit,closePromptLabel:eg.closePromptLabel,children:!!er&&(0,n.jsx)(u.o,{src:ec,onCloseMeCallback:j.hideEdit,className:P.$C.CONTRIBUTE_EDIT_IFRAME})}),(0,n.jsx)(m.Drawer,{className:P.$C.CONTRIBUTE_REPORT_DRAWER,isOpen:B.showReportDrawer,onCloseClicked:j.hideReport,children:!!er&&(0,n.jsx)(u.o,{src:eE,onCloseMeCallback:j.hideReport,className:P.$C.CONTRIBUTE_REPORT_IFRAME})})]})]})},ev=g.styled.div.withConfig({componentId:"sc-912a96d0-0"})(["position:absolute;left:-9999px;"])}}]);